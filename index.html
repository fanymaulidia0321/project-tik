import qrcode
from PIL import Image, ImageDraw, ImageFont

nis = "3167"
nama = "Fany Maulidia"
kelas = "XI.A"

data_qr = f"{nis}|{nama}|{kelas}"

qr_img = qrcode.make(data_qr)
qr_img = qr_img.convert("RGB")

font_size = 20
try:
    font = ImageFont.truetype("DejaVuSans.ttf", font_size)
except:
    font = ImageFont.load_default()

w_img, h_img = qr_img.size
padding = 10
label_h = font_size + padding

# Buat kanvas baru (QR + teks)
new_img = Image.new("RGB", (w_img, h_img + label_h), "white")
new_img.paste(qr_img, (0, 0))
draw = ImageDraw.Draw(new_img)
text_w, text_h = draw.textsize(nama, font=font)
draw.text(((w_img - text_w) // 2, h_img + padding // 2), nama, fill="black", font=font)

new_img.save("QR_Fany_Maulidia.png")

print("QR_Fany_Maulidia.png")
